{"ast":null,"code":"var _jsxFileName = \"D:\\\\studi\\\\ofer\\\\l51_28_04\\\\react51\\\\src\\\\marketComps\\\\client\\\\loginClient.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Header from './header';\nimport { useForm } from \"react-hook-form\";\nimport { useHistory } from 'react-router';\nimport { doApiMethod, URL_API } from '../../services/apiSer';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginClient(props) {\n  _s();\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  let history = useHistory(); // פונקציה בשיבל לקרוא לתצוגת ההודעות של הטוסט\n  // let { addToast } = useToasts();\n\n  let emailRef = register({\n    required: true,\n    pattern: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i\n  });\n  let passRef = register({\n    required: true,\n    minLength: 3\n  });\n\n  const onFormSub = dataBody => {\n    //dataBody -> מכיל אובייקט עם המאפיינים לפי השמות של האינפוטים והסלקטים\n    console.log(dataBody);\n    doApi(dataBody);\n  }; // 13:15\n\n\n  const doApi = async dataBody => {\n    let url = URL_API + \"/users/login\"; // dataBody > אובייקט שמכיל את האימייל והסיסמא מהטופס\n\n    let data = await doApiMethod(url, \"POST\", dataBody);\n    console.log(data); // login success\n\n    if (data.token) {\n      localStorage.setItem(\"tok\", data.token);\n      let url2 = URL_API + \"/users/myInfo\";\n      let userInfo = await doApiMethod(url2, \"GET\"); // פונקציה שקוראת להודעת טוסט , צבע ירוק ושיעלם\n      // addToast(\"Welcome to admin panel, you logged in\",\n      //   {\n      //     appearance: 'success',\n      //     autoDismiss: true\n      //   })\n      // alert(\"you log in\");\n\n      localStorage.setItem(\"userName\", userInfo.name);\n      history.push(\"/\");\n    } else {\n      // addToast(\"Try again , user or password worng\",\n      //   {\n      //     appearance: 'error',\n      //     autoDismiss: true\n      //   }\n      // )\n      // TODO : show toaste message \n      alert(\"try again , user or password worng\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Log in:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onFormSub),\n        className: \"col-lg-6 mx-auto p-2 shadow mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"form-label\",\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: emailRef,\n            name: \"email\",\n            type: \"text\",\n            className: \"form-control\",\n            id: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), errors.email && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: \"Please enter valid Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"pass\",\n            className: \"form-label\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: passRef,\n            name: \"pass\",\n            type: \"text\",\n            className: \"form-control\",\n            id: \"pass\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), errors.pass && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: \"Please enter valid Password min 3 charts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signup\",\n            className: \"btn btn-danger\",\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginClient, \"OxBzvLvyqkluHWa37TdHftQcVy0=\", false, function () {\n  return [useForm, useHistory];\n});\n\n_c = LoginClient;\nexport default LoginClient;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginClient\");","map":{"version":3,"sources":["D:/studi/ofer/l51_28_04/react51/src/marketComps/client/loginClient.js"],"names":["React","Header","useForm","useHistory","doApiMethod","URL_API","Link","LoginClient","props","register","handleSubmit","errors","history","emailRef","required","pattern","passRef","minLength","onFormSub","dataBody","console","log","doApi","url","data","token","localStorage","setItem","url2","userInfo","name","push","alert","email","pass"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Header from './header';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useHistory } from 'react-router';\r\nimport { doApiMethod, URL_API } from '../../services/apiSer';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction LoginClient(props) {\r\n  const { register, handleSubmit, errors } = useForm();\r\n  let history = useHistory()\r\n  // פונקציה בשיבל לקרוא לתצוגת ההודעות של הטוסט\r\n  // let { addToast } = useToasts();\r\n\r\n  let emailRef = register({ required: true, pattern: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i });\r\n  let passRef = register({ required: true, minLength: 3 })\r\n\r\n  const onFormSub = (dataBody) => {\r\n    //dataBody -> מכיל אובייקט עם המאפיינים לפי השמות של האינפוטים והסלקטים\r\n    console.log(dataBody);\r\n    doApi(dataBody)\r\n  }\r\n  // 13:15\r\n  const doApi = async (dataBody) => {\r\n    let url = URL_API + \"/users/login\";\r\n    // dataBody > אובייקט שמכיל את האימייל והסיסמא מהטופס\r\n    let data = await doApiMethod(url, \"POST\", dataBody);\r\n    console.log(data);\r\n    // login success\r\n    if (data.token) {\r\n      localStorage.setItem(\"tok\", data.token);\r\n\r\n      let url2 = URL_API + \"/users/myInfo\"\r\n      let userInfo = await doApiMethod(url2, \"GET\");\r\n\r\n      // פונקציה שקוראת להודעת טוסט , צבע ירוק ושיעלם\r\n      // addToast(\"Welcome to admin panel, you logged in\",\r\n      //   {\r\n      //     appearance: 'success',\r\n      //     autoDismiss: true\r\n      //   })\r\n      // alert(\"you log in\");\r\n      localStorage.setItem(\"userName\", userInfo.name);\r\n      history.push(\"/\");\r\n    }\r\n    else {\r\n      // addToast(\"Try again , user or password worng\",\r\n      //   {\r\n      //     appearance: 'error',\r\n      //     autoDismiss: true\r\n      //   }\r\n      // )\r\n      // TODO : show toaste message \r\n      alert(\"try again , user or password worng\")\r\n    }\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <Header />\r\n      <div className=\"container\">\r\n        <h1>Log in:</h1>\r\n        <form onSubmit={handleSubmit(onFormSub)} className=\"col-lg-6 mx-auto p-2 shadow mt-3\">\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"email\" className=\"form-label\">Email address</label>\r\n            <input ref={emailRef} name=\"email\" type=\"text\" className=\"form-control\" id=\"email\" />\r\n            {/* האירור לפי השם של האינפוט מייצר לעצמו מאפיין אם יש שם טעות */}\r\n            {errors.email && <span className=\"text-danger\">Please enter valid Email</span>}\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"pass\" className=\"form-label\">Password</label>\r\n            <input ref={passRef} name=\"pass\" type=\"text\" className=\"form-control\" id=\"pass\" />\r\n            {errors.pass && <span className=\"text-danger\">Please enter valid Password min 3 charts</span>}\r\n          </div>\r\n          <div className=\"d-flex justify-content-between\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            <Link to=\"/signup\" className=\"btn btn-danger\">Sign up</Link>\r\n          </div>\r\n\r\n        </form>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default LoginClient"]},"metadata":{},"sourceType":"module"}