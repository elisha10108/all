{"ast":null,"code":"var _jsxFileName = \"D:\\\\studi\\\\ofer\\\\l47\\\\react\\\\src\\\\marketComps\\\\admin\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { useHistory } from 'react-router';\nimport { doApiMethod, URL_API } from '../../services/apiSer'; // import { useToasts } from \"react-toast-notifications\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login(props) {\n  _s();\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  let history = useHistory(); // פונקציה בשיבל לקרוא לתצוגת ההודעות של הטוסט\n  // let { addToast } = useToasts();\n\n  let emailRef = register({\n    required: true,\n    pattern: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i\n  });\n  let passRef = register({\n    required: true,\n    minLength: 3\n  });\n\n  const onFormSub = dataBody => {\n    //dataBody -> מכיל אובייקט עם המאפיינים לפי השמות של האינפוטים והסלקטים\n    console.log(dataBody);\n    doApi(dataBody);\n  }; // 13:15\n\n\n  const doApi = async dataBody => {\n    let url = URL_API + \"/users/login\"; // dataBody > אובייקט שמכיל את האימייל והסיסמא מהטופס\n\n    let data = await doApiMethod(url, \"POST\", dataBody);\n    console.log(data); // login success\n\n    if (data.token) {\n      // פונקציה שקוראת להודעת טוסט , צבע ירוק ושיעלם\n      // addToast(\"Welcome to admin panel, you logged in\",\n      //   {\n      //     appearance: 'success',\n      //     autoDismiss: true\n      //   })\n      localStorage.setItem(\"tok\", data.token);\n      history.push(\"/admin/list\");\n    } else {\n      // addToast(\"Try again , user or password worng\",\n      //   {\n      //     appearance: 'error',\n      //     autoDismiss: true\n      //   }\n      // )\n      // TODO : show toaste message \n      alert(\"try again , user or password worng\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onFormSub),\n      className: \"col-lg-6 mx-auto p-2 shadow mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          className: \"form-label\",\n          children: \"Email address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: emailRef,\n          name: \"email\",\n          type: \"text\",\n          className: \"form-control\",\n          id: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), errors.email && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger\",\n          children: \"Please enter valid Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"pass\",\n          className: \"form-label\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: passRef,\n          name: \"pass\",\n          type: \"text\",\n          className: \"form-control\",\n          id: \"pass\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), errors.pass && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger\",\n          children: \"Please enter valid Password min 3 charts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"OxBzvLvyqkluHWa37TdHftQcVy0=\", false, function () {\n  return [useForm, useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/studi/ofer/l47/react/src/marketComps/admin/login.js"],"names":["React","useForm","useHistory","doApiMethod","URL_API","Login","props","register","handleSubmit","errors","history","emailRef","required","pattern","passRef","minLength","onFormSub","dataBody","console","log","doApi","url","data","token","localStorage","setItem","push","alert","email","pass"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,uBAArC,C,CACA;;;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AAAA;;AACpB,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA0BC,IAAAA;AAA1B,MAAqCR,OAAO,EAAlD;AACA,MAAIS,OAAO,GAAGR,UAAU,EAAxB,CAFoB,CAGpB;AACA;;AAEA,MAAIS,QAAQ,GAAGJ,QAAQ,CAAC;AAAEK,IAAAA,QAAQ,EAAE,IAAZ;AAAkBC,IAAAA,OAAO,EAAE;AAA3B,GAAD,CAAvB;AACA,MAAIC,OAAO,GAAGP,QAAQ,CAAC;AAAEK,IAAAA,QAAQ,EAAE,IAAZ;AAAkBG,IAAAA,SAAS,EAAE;AAA7B,GAAD,CAAtB;;AAEA,QAAMC,SAAS,GAAIC,QAAD,IAAc;AAC9B;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAG,IAAAA,KAAK,CAACH,QAAD,CAAL;AACD,GAJD,CAToB,CAcpB;;;AACA,QAAMG,KAAK,GAAG,MAAOH,QAAP,IAAoB;AAChC,QAAII,GAAG,GAAGjB,OAAO,GAAG,cAApB,CADgC,CAEhC;;AACA,QAAIkB,IAAI,GAAG,MAAMnB,WAAW,CAACkB,GAAD,EAAM,MAAN,EAAcJ,QAAd,CAA5B;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ,EAJgC,CAKhC;;AACA,QAAIA,IAAI,CAACC,KAAT,EAAgB;AACd;AACA;AACA;AACA;AACA;AACA;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BH,IAAI,CAACC,KAAjC;AACAb,MAAAA,OAAO,CAACgB,IAAR,CAAa,aAAb;AACD,KATD,MAUK;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,MAAAA,KAAK,CAAC,oCAAD,CAAL;AACD;AACF,GA1BD;;AA4BA,sBACE;AAAA,2BAGE;AAAM,MAAA,QAAQ,EAAEnB,YAAY,CAACQ,SAAD,CAA5B;AAAyC,MAAA,SAAS,EAAC,kCAAnD;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,gCACE;AAAO,UAAA,OAAO,EAAC,OAAf;AAAuB,UAAA,SAAS,EAAC,YAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAO,UAAA,GAAG,EAAEL,QAAZ;AAAsB,UAAA,IAAI,EAAC,OAA3B;AAAmC,UAAA,IAAI,EAAC,MAAxC;AAA+C,UAAA,SAAS,EAAC,cAAzD;AAAwE,UAAA,EAAE,EAAC;AAA3E;AAAA;AAAA;AAAA;AAAA,gBAFF,EAIGF,MAAM,CAACmB,KAAP,iBAAgB;AAAM,UAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJnB;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAOE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,gCACE;AAAO,UAAA,OAAO,EAAC,MAAf;AAAsB,UAAA,SAAS,EAAC,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAO,UAAA,GAAG,EAAEd,OAAZ;AAAqB,UAAA,IAAI,EAAC,MAA1B;AAAiC,UAAA,IAAI,EAAC,MAAtC;AAA6C,UAAA,SAAS,EAAC,cAAvD;AAAsE,UAAA,EAAE,EAAC;AAAzE;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGGL,MAAM,CAACoB,IAAP,iBAAe;AAAM,UAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHlB;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,eAaE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AAHF;AAAA;AAAA;AAAA;AAAA,UADF;AAuBD;;GAlEQxB,K;UACoCJ,O,EAC7BC,U;;;KAFPG,K;AAoET,eAAeA,KAAf","sourcesContent":["import React from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useHistory } from 'react-router';\r\nimport { doApiMethod, URL_API } from '../../services/apiSer';\r\n// import { useToasts } from \"react-toast-notifications\";\r\n\r\nfunction Login(props) {\r\n  const { register, handleSubmit, errors } = useForm();\r\n  let history = useHistory()\r\n  // פונקציה בשיבל לקרוא לתצוגת ההודעות של הטוסט\r\n  // let { addToast } = useToasts();\r\n\r\n  let emailRef = register({ required: true, pattern: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i });\r\n  let passRef = register({ required: true, minLength: 3 })\r\n\r\n  const onFormSub = (dataBody) => {\r\n    //dataBody -> מכיל אובייקט עם המאפיינים לפי השמות של האינפוטים והסלקטים\r\n    console.log(dataBody);\r\n    doApi(dataBody)\r\n  }\r\n  // 13:15\r\n  const doApi = async (dataBody) => {\r\n    let url = URL_API + \"/users/login\";\r\n    // dataBody > אובייקט שמכיל את האימייל והסיסמא מהטופס\r\n    let data = await doApiMethod(url, \"POST\", dataBody);\r\n    console.log(data);\r\n    // login success\r\n    if (data.token) {\r\n      // פונקציה שקוראת להודעת טוסט , צבע ירוק ושיעלם\r\n      // addToast(\"Welcome to admin panel, you logged in\",\r\n      //   {\r\n      //     appearance: 'success',\r\n      //     autoDismiss: true\r\n      //   })\r\n      localStorage.setItem(\"tok\", data.token);\r\n      history.push(\"/admin/list\");\r\n    }\r\n    else {\r\n      // addToast(\"Try again , user or password worng\",\r\n      //   {\r\n      //     appearance: 'error',\r\n      //     autoDismiss: true\r\n      //   }\r\n      // )\r\n      // TODO : show toaste message \r\n      alert(\"try again , user or password worng\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main>\r\n      {/* handlesubmit - לא יפעיל את הפונקציה שקיבל כפרמטר\r\n      רק אחרי שאין אפילו טעות אחת */}\r\n      <form onSubmit={handleSubmit(onFormSub)} className=\"col-lg-6 mx-auto p-2 shadow mt-3\">\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"email\" className=\"form-label\">Email address</label>\r\n          <input ref={emailRef} name=\"email\" type=\"text\" className=\"form-control\" id=\"email\" />\r\n          {/* האירור לפי השם של האינפוט מייצר לעצמו מאפיין אם יש שם טעות */}\r\n          {errors.email && <span className=\"text-danger\">Please enter valid Email</span>}\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"pass\" className=\"form-label\">Password</label>\r\n          <input ref={passRef} name=\"pass\" type=\"text\" className=\"form-control\" id=\"pass\" />\r\n          {errors.pass && <span className=\"text-danger\">Please enter valid Password min 3 charts</span>}\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n\r\n\r\n      </form>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}